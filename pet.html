<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GeoPets | Milu</title>

  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      margin: 0;
      background: #f4f6f9;
      padding: 12px;
    }

    .header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }

    .header img {
      width: 34px;
      height: 34px;
      border-radius: 6px;
    }

    .header span {
      font-size: 18px;
      font-weight: bold;
      color: #1f2937;
    }

    .card {
      background: #ffffff;
      border-radius: 14px;
      padding: 14px;
      max-width: 420px;
      margin: auto;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }

    .pet-photo {
      width: 100%;
      border-radius: 12px;
      margin-bottom: 10px;
    }

    h1 {
      text-align: center;
      font-size: 20px;
      margin: 6px 0 6px;
    }

    .pet-message {
      text-align: center;
      font-size: 14px;
      color: #374151;
      margin-bottom: 10px;
    }

    .info-box {
      background: #eef2ff;
      border-radius: 10px;
      padding: 10px;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .info-box strong {
      color: #1e40af;
    }

    .actions {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-top: 10px;
    }

    .btn {
      height: 48px;
      border-radius: 10px;
      border: none;
      font-size: 13px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 6px;
    }

    .btn-whatsapp {
      background: #25D366;
      color: #fff;
    }

    .btn-location {
      background: #2563eb;
      color: #fff;
    }

    .footer {
      text-align: center;
      font-size: 12px;
      color: #6b7280;
      margin-top: 10px;
    }
  </style>
</head>

<body>

  <div class="header">
    <img src="imagenes/icono.jpg" alt="GeoPets">
    <span>GeoPets</span>
  </div>

  <div class="card">

    <img src="mascotasqr/milu_001.jpeg" alt="Milu" class="pet-photo">

    <h1>üê∂ Soy Milu</h1>

    <div class="pet-message">
      Estoy perdida y tengo mucho miedo.<br>
      Si me encontraste, por favor ay√∫dame a volver a casa üôè
    </div>

    <div class="info-box">
      <strong>‚ö†Ô∏è Informaci√≥n importante:</strong><br>
      Tengo <strong>p√©nfigo</strong> y necesito <strong>medicamentos diarios con urgencia</strong>.
    </div>

    <div class="info-box">
      <strong>üìû Mi humano:</strong><br>
      313 428 9145
    </div>

    <div class="actions">
      <button class="btn btn-whatsapp" onclick="contactarWhatsapp()">
        Escribir por WhatsApp
      </button>

      <button class="btn btn-location" onclick="reportarUbicacion()">
        Reportar √∫ltima ubicaci√≥n de Milu
      </button>
    </div>

  </div>

  <div class="footer">
    Gracias por ayudar üíô GeoPets conecta mascotas con sus familias
  </div>

  <script>
    // ‚úÖ FUNCI√ìN QUE FALTABA
    function contactarWhatsapp() {
      const telefono = "573134289145"; // mismo n√∫mero
      const mensaje = `
üê∂ Hola, soy Milu üò¢

alguien me encontr√≥ y quiere ayudarme a estar contigo de nuevo üò¢
Estoy perdida y necesito volver a casa.
      `;

      const url = "https://wa.me/" + telefono + "?text=" + encodeURIComponent(mensaje);
      window.location.href = url;
    }

    function reportarUbicacion() {
      if (!navigator.geolocation) {
        alert("Tu dispositivo no permite compartir ubicaci√≥n");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        function (position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;

          const mensaje = `
üê∂ Hola, soy Milu y estoy perdida üò¢

Una persona acaba de reportar mi √∫ltima ubicaci√≥n:

üó∫Ô∏è Ver en el mapa:
https://www.google.com/maps?q=${lat},${lon}

Por favor ay√∫denme a volver a casa üôè
          `;

          const telefono = "573134289145";
          const url = "https://wa.me/" + telefono + "?text=" + encodeURIComponent(mensaje);

          window.location.href = url;
        },
        function () {
          alert("No se pudo obtener la ubicaci√≥n");
        }
      );
    }
  </script>


  <!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<script>
  // üîë Inicializar EmailJS (PUBLIC KEY)
  (function () {
    emailjs.init("-SdCbCtUZl1XbPNEr");
  })();

  // üìß CORREO AUTOM√ÅTICO AL ESCANEAR EL QR
  window.onload = function () {
    const fecha = new Date().toLocaleDateString("es-CO");
    const hora = new Date().toLocaleTimeString("es-CO");

    emailjs.send(
      "service_ehersct",   // Service ID
      "template_tj7zkee",  // Template ID
      {
        placa_id: "GP-0001",
        mascota: "Milu",
        fecha: fecha,
        hora: hora,
        mapa_url: "Ubicaci√≥n no compartida"
      }
    ).then(
      function () {
        console.log("Correo de escaneo enviado");
      },
      function (error) {
        console.error("Error enviando correo", error);
      }
    );
  };
</script>

</body>
</html>

